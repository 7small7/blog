> 专注于PHP、MySQL、Linux和前端开发，感兴趣的感谢点个关注哟！！！文章整理在[GitHub](https://github.com/7small7),[Gitee](https://gitee.com/bruce_qiq)主要包含的技术有PHP、Redis、MySQL、JavaScript、HTML&CSS、Linux、Java、Golang、Linux和工具资源等相关理论知识、面试题和实战内容。本文[翻译自](https://www.guru99.com/stack-vs-heap.html) 如若涉及侵权，请联系平台进行删除。

@author:[7small7](https://github.com/7small7)。

@source:[公众号-菜鸟成长学习笔记](/site/)。

@project:[微信小程序 程序员面试题大全](/site/)。

## 什么是堆栈

1. 堆栈是计算机内存的一个特殊区域，用于存储由函数创建的临时变量。在堆栈中，变量在运行时被声明、存储和初始化。
2. 它是一个临时存储内存。计算任务完成后，变量的内存将自动擦除。堆栈部分主要包含方法、局部变量和引用变量。

## 什么是堆

1. 堆是编程语言用来存储全局变量的内存。默认情况下，所有全局变量都存储在堆内存空间中。它支持动态内存分配。
2. 堆不会自动为您管理，也不会由 CPU 严格管理。它更像是一个自由浮动的内存区域。

## 堆栈和栈的区别

1. 堆栈是线性数据结构，而堆是分层数据结构。
2. 堆栈内存永远不会变得碎片化，而堆内存可能会变得碎片化，因为首先分配内存块，然后释放内存块。
3. 堆栈仅访问局部变量，而堆允许您全局访问变量。
4. 堆栈变量不能调整大小，而堆变量可以调整大小。
5. 堆栈内存在连续块中分配，而堆内存按任意随机顺序分配。
6. 堆栈不需要取消分配变量，而在堆中则需要取消分配。
7. 堆栈分配和解除分配由编译器指令完成，而堆分配和解除分配由程序员完成。
![](http://qiniucloud.qqdeveloper.com/202206122313652.png)
![](http://qiniucloud.qqdeveloper.com/202206122314711.png)

### 使用堆栈的优点

![](http://qiniucloud.qqdeveloper.com/202206122314943.webp)
1. 帮助您以“最后先出（LIFO）”方法管理数据，这在链表和数组中是不可能的。
2. 当调用函数时，局部变量存储在堆栈中，一旦返回，它就会被自动销毁。
3. 当变量未在该函数外部使用时，将使用堆栈。
4. 它允许您控制如何分配和释放内存。
5. 堆栈会自动清理对象。
6. 不易损坏,无法调整变量大小。

### 使用堆内存的优点

![](http://qiniucloud.qqdeveloper.com/202206122316887.webp)
1. 堆可帮助您找到最大和最小数字
2. 垃圾回收在堆内存上运行，以释放对象使用的内存。
3. 堆方法也用于优先级队列。
4. 它允许您全局访问变量。
5. 堆对内存大小没有任何限制。

### 使用堆栈的缺点

1. 堆栈内存非常有限。
2. 在堆栈上创建太多对象会增加堆栈溢出的风险。
3. 随机访问是不可能的。
4. 变量存储将被覆盖，这有时会导致函数或程序的未定义行为。
5. 堆栈将落在内存区域之外，这可能会导致异常终止。

### 使用堆的缺点

1. 它可以提供操作系统可以提供的最大内存
2. 计算需要更多时间。
3. 堆内存中的内存管理更为复杂，因为它是全局使用的。
4. 与堆栈相比，它在执行中花费的时间太多。

## 何时使用堆或堆栈

1. 当您需要分配大块内存时，应使用堆。例如，您希望创建一个大尺寸数组或大结构来长时间保留该变量，然后您应该在堆上分配它。
2. 但是，如果您正在使用相对较小的变量，则只有在使用它们的函数处于活动状态时才需要这些变量。然后，您需要使用堆栈，这样更快，更容易。