
### 如果用户反馈页面响应比较慢，该如何去排查问题，并优化对应问题？

解题思路：主要考察综合分析能力，应该站在用户角度和系统角度分析，而不是一开始就直接回答MySQL优化、添加缓存类似的回答，因为这些回答只是其中的一个环节。

1. 站在用户的角度，验证该问题是否真实，是否为用户个人自身问题导致。
2. 排除用户问题之后，就需要分析系统问题。分析系统时，需要从用户访问开发，整条访问的链路流程。这过程中大致链路: 访问链接->DNS解析->访问服务器->web服务器->应用程序->数据库。
3. Nginx优化思路：[Nginx优化思路](https://cloud.tencent.com/developer/article/1613310)。
4. PHP优化思路：[PHP优化思路](https://m.yht7.com/news/17099)。
5. MySQL优化思路：缓存、索引、SQL语句为主导。
6. 前端优化思路：静态资源CDN、静态资源压缩、静态资源分割、开启本地缓存模式。
7. 网络优化思路：更新DNS。DNS一般会很少遇到该问题，不过之前在实际的项目中遇到过因为DNS导致整个系统变慢的情况。


### Redis中的持久化了解吗？

1. Redis持久化主要是考虑到数据都是存储在内存中的，出现服务异常数据丢失问题。
2. Redis持久化分为两种，一种是RDB，一种是AOF。RDB是一种日志快照的形式，存储的是Redis实际的二进制安全数据；AOF是一种日志追加的方式，存储的是Redis整个命令操作。
3. RDB持久化方式，父进程会fork一个子进程出来单独处理持久化，在fork的过程中是阻塞状态，父进程不会响应客户端的操作。分为`bgsave`和`save`方式。 
4. AOF持久化方式，Redis会把新的命令写入到aof缓冲区中，然后根据`appendfsync`配置的持久化同步策略，存储到磁盘中。

### Redis的内存淘汰策略了解吗？

1. 淘汰策略主要是真针对数据一直存在内存中，导致内存无法接纳新的数据。重点是了解lru算法、lfu算法。个人是把它分为了5中方式。
2. 分别是lru、lfu、random、ttl、noeviction这几种方式。具体的细分下来分别是：
3. volatile-lru当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，移除最近最少使用的key。
4. allkeys-lru当内存不足以容纳新写入数据时，在键空间中，移除最近最少使用的key（这个是最常用的）。
5. volatile-lfu当内存不足以容纳新写入数据时，在过期密集的键中，使用LFU算法进行删除key。
6. allkeys-lfu当内存不足以容纳新写入数据时，使用LFU算法移除所有的key。
7. volatile-random当内存不足以容纳新写入数据时，在设置了过期的键中，随机删除一个key。
8. 当内存不足以容纳新写入数据时，随机删除一个或者多个key。
9. volatile-ttl当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，有更早过期时间的key优先移除。
10. noeviction当内存不足以容纳新写入数据时，新写入操作会报错。(默认的方式)

### Redis中使用大key有什么问题？该如何去优化？

1. 大key占用内存大；重启加载慢；主从复制慢等问题。
2. 拆分该key；只缓存必要内容；选择合适的缓存方式(例如文章内容这种数据，就不要存放Redis了。Redis更适合存放一些热点数据较好)。

### Redis中hash数据类型，了解吗?

[参考文章](http://c.biancheng.net/redis/hashes.html)
### MySQL的事务隔离级别有哪几种？

1. 事务隔离级别有未提交读、读提交、可重复读和串行。
### MySQL中的乐观锁和悲观锁，了解吗？

1. 悲观锁会认为在读写数据的过程中，数据都会存在被修改的情况，在操作之前都会加上锁。
2. 乐观锁与悲观锁不同，乐观锁是通过对数据做版本号，对比版本号进行操作。

### MySQL中的InnoDB存储引擎，底层使用的什么数据结构？

1. InnoDB存储引擎底层是用的数据结构是B+Tree。
2. 与B Tree的树结构相比，B+Tree的优势在于数据存在叶子节点，每页使用指针相连，树的层级低，查询效率高。B Tree每一个节点都会存储数据，导致数据节点深度大，查询效率低。

### 对ES了解吗？如何通过多个ID去查询数据？
### 异步队列，如何保证数据的一致性问题？(主要是数据的不丢失)

1. 一般可能会使用Redis来实现队列功能，利用Redis自带的List数据类型。但是List存在容易丢失数据的情况，没有ack机制，并且一个队列数据不能多个消费进行消费。
2. 使用Redis的发布订阅，可以解决多个消费者问题，但是数据不支持持久化。
3. 如果是用Redis来实现队列功能，推荐使用Redis5.0版本中的新数据(Stream)，[参考文章](https://bruce_qiq.gitee.io/mianshi/#/article/redis/article_11)
4. 如果是中大型项目，推荐使用rabbitMQ、kafka等专门做MQ服务的更可靠。

### 用户访问一个网址到数据渲染到页面，中间都发生了什么？

本地DNS->DNS域名解析系统得到对应IP地址->与服务器建立TCP连接->发送http请求。[参考文章](https://juejin.cn/post/6844903912156168199)

### 缓存雪崩和缓存击穿，了解吗？

1. 缓存雪崩指的是大面积的key失效，从而导致大量请求都走数据库查询数据；缓存击穿是指缓存中不存在，从而去数据库中查询数据，但是数据库中也不会存在。
2. 缓存击穿，一般使用布隆过滤器解决该方式，或者缓存中存一个空的值。
3. 缓存雪崩，一般使用缓存时间均匀分布、多级缓存或者业务逻辑过期时间方式。